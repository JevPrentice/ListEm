<?xml version="1.0" encoding="UTF-8"?>
<ui xmlns="http://uiprogram.mezzanine.com/View" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://uiprogram.mezzanine.com/View ../../xsd/View.xsd">
    <view label="user_activity.title" unit="UserActivity" init="init">

        <navigation outcome="nav_user_management" target="UserManagement" />
        <navigation outcome="nav_send_custom_sms" target="SendCustomSMS" />
        <navigation outcome="nav_group_users" target="GroupUsers" />
        <navigation outcome="nav_outgoing_sms" target="UserActivityOutgoingSMS" />
        <navigation outcome="nav_system_report" target="SystemReport" />

        <action label="back" action="back"/>
        <action label="user_profile.send_progress_sms" action="send_progress_sms"/>
        <action label="user_profile.send_custom_sms_in" action="send_custom_sms_in"/>
        <action label="user_profile.send_custom_sms_out" action="send_custom_sms_out"/>
        <action label="user_profile.nav_outgoing_sms" action="nav_outgoing_sms"/>

        <submit label="refresh" action="init"/>
        <submit label="user_profile.button.forceQueue" action="forceQueue" />
        <submit label="user_profile.showalloutgoingsms" action="showOrHideDetail"/>

        <info label="client.name">
            <binding variable="vclientname">
            </binding>
        </info>

        <info label="client.currentactivity">
            <binding variable="vcurrentactivity">
            </binding>
        </info>

        <info label="client.progressmessage">
            <binding variable="vprogressmessage">
            </binding>
        </info>

        <info label="user_activity.bShowHideDetailvar">
            <binding variable="bShowHideDetail"></binding>
        </info>

        <table title="AllSMSLog.title" defaultSortColumn="0" defaultSortDirection="descending">
            <collectionSource variable="smsLog"/>
            <column heading="AllSMSLog.dateTimeStamp">
                <attributeName>dateTimeStamp</attributeName>
            </column>
            <column heading="AllSMSLog.mobileNumber">
                <attributeName>allSMSLog_client.firstName</attributeName>
                <attributeName>allSMSLog_client.mobileNumber</attributeName>
            </column>
            <column heading="AllSMSLog.direction">
                <attributeName>direction</attributeName>
            </column>            
              <column heading="AllSMSLog.messageText">
                <attributeName>messageText</attributeName>
            </column>
        </table>  
    
        <table title="AllSMSLog.SMSqueue" defaultSortColumn="0" defaultSortDirection="descending">
            <collectionSource variable="smsQueue"/>
            <column heading="AllSMSLog.dateTimeStamp">
                <attributeName>smsDateTime</attributeName>
            </column>
            <column heading="AllSMSLog.mobileNumber">
                <attributeName>c_clientsmsqueue.firstName</attributeName>
                <attributeName>c_clientsmsqueue.mobileNumber</attributeName>
            </column>
              <column heading="AllSMSLog.messageText">
                <attributeName>smsText</attributeName>
            </column>
        </table>  

        <table title="learningManager.TopicHistory.PatternTableTitle">
            <collectionSource variable="activityHistory"/>
            <column heading="learningManager.TopicHistory.Sequence">
                <attributeName>sequence_patternHistory.sequenceID</attributeName>
            </column>
            <column heading="learningManager.TopicHistory.Pattern">
                <attributeName>pattern_patternHistory.patternID</attributeName>
                <attributeName>pattern_patternHistory.PatternChannelKey.patternChannelID</attributeName>
            </column>
            <column heading="learningManager.TopicHistory.Client">
                <attributeName>client_patternHistory.firstName</attributeName>
                <attributeName>client_patternHistory.mobileNumber</attributeName>
            </column>
            <column heading="learningManager.TopicHistory.startDate">
                <attributeName>startDate</attributeName>
            </column>
            <column heading="learningManager.TopicHistory.reminderTime">
                <attributeName>reminderTime</attributeName>
            </column>
            <column heading="learningManager.TopicHistory.actualEndDate">
                <attributeName>actualEndDate</attributeName>
            </column>
            <column heading="learningManager.TopicHistory.statusID">
                <attributeName>statusID</attributeName>
            </column>
        </table>

        <table title="user_management.topicUserList">
            <collectionSource variable="userTus"/>
            <column heading="topicUser.topicUserID">
                <attributeName>client_topicUserSetup.mobileNumber</attributeName>
                <attributeName>client_topicUserSetup.firstName</attributeName>
                <attributeName>client_topicUserSetup.surname</attributeName>
            </column>
            <column heading="topic.topicID">
                <attributeName>umbrella_topicUserSetup.umbrellaID</attributeName>
            </column>
            <column heading="sub_topic.subTopicID">
                <attributeName>topic_topicUserSetup.topicID</attributeName>
            </column>
            <column heading="sub_topic.subTopicType">
                <attributeName>topic_topicUserSetup.topicType</attributeName>
            </column>
             <column heading="topicUser.topicOrder">
                <attributeName>topicOrder</attributeName>
            </column> 
            <column heading="topic.active">
                <attributeName>active</attributeName>
            </column> 
            <column heading="sub_topic.subTopicRunType">
                <attributeName>runType</attributeName>
            </column> 
            <column heading="topicUser.topicMinStartDate">
                <attributeName>topicMinStartDate</attributeName>
            </column> 
            <rowAction label="remove" action="deleteSelectedTus">
                <binding variable="tusDelete"/>
                <confirm subject="confirm_subject.deleteTopicUserSetup" body="confirm_body.deleteTopicUserSetup"/>
            </rowAction>
            <rowAction label="start" action="startSelectedTus">
                <binding variable="tusStart"/>
                <confirm subject="confirm_subject.fStartTopicUserSetup" body="confirm_body.fStartTopicUserSetup"/>
            </rowAction>
             <rowAction label="pause" action="pauseSelectedTus">
                <binding variable="tusPause"/>
            </rowAction>
             <rowAction label="resume" action="resumeSelectedTus">
                <binding variable="tusResume"/>
            </rowAction>
             <rowAction label="end" action="endSelectedTus">
                <binding variable="tusEnd"/>
                <confirm subject="confirm_subject.ForceTopicUserEnd" body="confirm_body.ForceTopicUserEnd"/>
            </rowAction>
        </table>

        <textarea label="ClientSummaryView.URL">
            <binding variable="csvURL">
            </binding>
        </textarea>
    </view>
</ui>