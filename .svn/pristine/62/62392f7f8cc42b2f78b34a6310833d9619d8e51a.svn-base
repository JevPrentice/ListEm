<?xml version="1.0" encoding="UTF-8"?>
<ui xmlns="http://uiprogram.mezzanine.com/View" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://uiprogram.mezzanine.com/View ../../xsd/View.xsd">
    <view label="learningManager.patternList.title" unit="PatternList" init="init">
    
        <!--<menuitem label="learningManager.patternList.menu" icon="Users" order="33">
            <userRole>LearningManager</userRole>
        </menuitem>-->
        
        <navigation outcome="back" target="SystemOverview" />
        <action label="back" outcome="back"/>
        
        <textfield label="activity.activityID">
            <binding variable="pattern">
                <attribute name="patternID"/>
            </binding>
        </textfield>

        <textfield label="activity.activityStartSMS">
            <binding variable="pattern">
                <attribute name="patternStartSMS"/>
            </binding>
        </textfield>

        <textfield label="activity.activityEndSMS">
            <binding variable="pattern">
                <attribute name="patternEndSMS"/>
            </binding>
        </textfield>
        
         <textfield label="activity.activityReminderSMS">
            <binding variable="pattern">
                <attribute name="patternReminderSMS"/>
            </binding>
        </textfield>
         <textfield label="activity.activityReminderTime">
            <binding variable="pattern">
                <attribute name="patternReminderTime"/>
            </binding>
        </textfield>
        <select label="activity.activityChannel">
       		<binding variable="uChannelKeyObject"/>
           <collectionSource function="ChannelKeyObjectController:getAllChannelKeyObject">
				<displayAttribute name="patternChannelID"/>
				<displayAttribute name="patternChannelDescription"/>
			</collectionSource>
        </select>
         <textfield label="activity.activityIVRstring">
            <binding variable="pattern">
                <attribute name="patternIVRstring"/>
            </binding>
        </textfield>

		<submit label="submit" action="savePattern"/>

        <table title="learningManager.patternList.list.title">
            <collectionSource function="getPatterns"/>
            <column heading="activity.activityID">
                <attributeName>patternID</attributeName>
            </column>
            <column heading="activity.activityStartSMS">
                <attributeName>patternStartSMS</attributeName>
            </column>
            <column heading="activity.activityEndSMS">
                <attributeName>patternEndSMS</attributeName>
            </column>
              <column heading="activity.activityReminderSMS">
                <attributeName>patternReminderSMS</attributeName>
            </column>
            <column heading="activity.activityReminderTime">
                <attributeName>patternReminderTime</attributeName>
            </column>
			<column heading="activity.activityChannel">
                <attributeName>PatternChannelKey.patternChannelID</attributeName>
                <attributeName>PatternChannelKey.patternChannelDescription</attributeName>
            </column>
            <column heading="activity.activityIVRstring">
                <attributeName>patternIVRstring</attributeName>
            </column>

            <rowAction label="edit" action="patternEdit">
                <binding variable="pattern"/>
            </rowAction>

            <rowAction label="delete" action="patternRemove">
                <binding variable="deletePattern"/>
            </rowAction>
        </table>
    </view>
</ui>