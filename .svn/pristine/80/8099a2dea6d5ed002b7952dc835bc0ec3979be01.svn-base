unit ActivityEditSmsType;

Sequence sequence;
Pattern activity;
PatternType patternType;

PatternOrder activityOrder;

PatternTypeTable patternTypeTable;

string message;
string nav_return;

void init(){

	message = "";
	if (activity != null){
		patternTypeTable = activity.patternTypeTable_Pattern;
		if (patternTypeTable != null){
			patternType = patternTypeTable.patternTypeTable_PatternType;	
		}
	}
	if (patternTypeTable == null){
		patternTypeTable = PatternTypeTable:new();
	}
	if (nav_return == null || nav_return == ""){
		nav_return = "nav_activty_order_management";
	}
}

string back(){
	resetVars();
	return nav_return;
}

void resetVars(){
	sequence = null;
	patternTypeTable = null;
	patternType = null;
	activity = null;
	activityOrder = null;
}

string saveActivityType(){
	savePatternTypeTable();
	ActivityOrderManagement:activityFilter = activity;
	return back();
}

string saveActivityTypeNavActivityOrderEdit(){
	savePatternTypeTable();
	nav_return = "nav_activity_order_edit";
	ActivityOrderEdit:activity = activity;
	ActivityOrderEdit:sequence = sequence;
	ActivityOrderEdit:activityOrder = activityOrder;
	return back();
}

void savePatternTypeTable(){
	patternTypeTable.patternTypeTable_Pattern = activity;
	patternTypeTable.patternTypeTable_PatternType = patternType;
	patternTypeTable.save();

	message = "Activity SMS Type Saved";
    Alerter:alert(message);

    IVRMappingTable:deleteIVRMappingTable(activity);
}
