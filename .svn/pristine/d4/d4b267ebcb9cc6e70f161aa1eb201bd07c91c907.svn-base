unit ActivityEditIvrDetails;

Pattern activity;
Sequence sequence;

PatternOrder activityOrder;

string nav_return;
string message;

int ivr_length_sec;
string ivrString;

void init(){

	if (nav_return == null || nav_return == ""){
		nav_return = "nav_activty_order_management";
	}

	if (activity != null){
		ivr_length_sec = activity.ivr_length_sec;
		ivrString = activity.patternID;
	}
}

void resetVars(){
	ivr_length_sec = 0;
	activity = null;
	sequence = null;
	activityOrder = null;
	message = "";
}

string navigate(){
	resetVars();
	return nav_return;
}

void saveActivity(){
	
	activity.ivr_length_sec = ivr_length_sec;
	activity.patternIVRstring = ivrString;

	activity.save();

	/* JV */
	IVRMappingTable:fReplaceIVRMappingTable(activity);
	/* JV */

    message = "Activity Saved";
    Alerter:alert(message);
}

string saveActivityButton(){
	saveActivity();
	ActivityOrderManagement:activityFilter = activity;
	return navigate();
}

string saveActivityNavActivityOrderEditButton(){
	saveActivity();
	nav_return = "nav_activity_order_edit";
	ActivityOrderEdit:activity = activity;
	ActivityOrderEdit:sequence = sequence;
	ActivityOrderEdit:activityOrder = activityOrder;
	return navigate();
}

