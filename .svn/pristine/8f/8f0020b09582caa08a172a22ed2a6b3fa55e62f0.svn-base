<?xml version="1.0" encoding="UTF-8"?>
<ui xmlns="http://uiprogram.mezzanine.com/View" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://uiprogram.mezzanine.com/View ../../xsd/View.xsd">
    <view label="message_order_management.title" unit="MessageOrderManagement" init="init">
    
        <navigation outcome="nav_message_edit" target="MessageEdit" />
        <navigation outcome="nav_message_order_edit" target="MessageOrderEdit" />
        <navigation outcome="nav_manage_activities" target="ActivityManagement" />
        <navigation outcome="nav_manage_messages" target="MessageManagement" />
        <navigation outcome="nav_activity_orders" target="ActivityOrderManagement" />        
        <navigation outcome="nav_message_order_management" target="MessageOrderManagement" />        

        <menuitem label="message_order_management.title" icon="MessageOrderManagement" order="14">
            <userRole>ProgramManager</userRole>
        </menuitem>

        <action label="activity_order.nav_manage_activities" action="navManageActivities"/>
        <action label="activity_order.nav_manage_messages" action="navManageMessages"/>
        <action label="message_order_management.create_message_order" action="navCreateMessageOrder"/>

        <info label="activity_order.activity_filter">
            <binding variable="activityFilter">
                <attribute name="patternID"/>
            </binding>
        </info>

        <table title="message_order_management.table">
            <collectionSource variable="messageOrdersTemp"/>
            <column heading="message_order_management.messageID">
                <attributeName>message_id</attributeName>
            </column>
            <column heading="message_order_management.activityID">
                <attributeName>activity_id</attributeName>
            </column>
            <column heading="message_order_management.messageOrder">
                <attributeName>message_order</attributeName>
            </column>
            <column heading="message_order_management.messageText">
                <attributeName>message_text</attributeName>
            </column>
            <rowAction label="message_order_management.view_activity_order" action="viewActivityOrder">
                <binding variable="messageOrderTemp"/>
            </rowAction>
            <rowAction label="message_order_management.edit_message" action="editMessage">
                <binding variable="messageOrderTemp"/>
            </rowAction>
            <rowAction label="message_order_management.edit_message_order" action="editMessageOrder">
                <binding variable="messageOrderTemp"/>
            </rowAction>
            <rowAction label="message_order_management.delete" action="removeMessageOrder">
                <binding variable="messageOrderTemp"/>
                <confirm subject="message_order_management.table.delete.confirm.subject" body="message_order_management.table.delete.confirm.body"/>
            </rowAction>
        </table>

        <submit label="remove_filter" action="removeFiltersButton"/>
        
    </view>
</ui>